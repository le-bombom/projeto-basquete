<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio</title>
    <link rel="icon" href="assets/iconTitle/favicon.png" type="image/png">
    <link rel="stylesheet" href="paginainicial.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="carregamento.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>

<body>
    <!-- Loader de carregamento (animação de bola de basquete) -->
    <div id="loader" class="loader-overlay">
        <div class="bola-loader">
            <img src="assets/diversos/basketball-svgrepo-com.svg" alt="Carregando..." class="linhas-bola">
        </div>
    </div>

    <!-- Cabeçalho com menu de navegação -->
    <header class="header">
        <nav class="navbar">
            <!-- Logo clicável - volta para home com transição suave -->
            <a href="index.html" class="header-logo" onclick="showLoaderOnNavigate(event, 'paginainicial.html')">
                <img src="assets/iconTitle/logo.png" alt="Logo do site">
            </a>
            
            <!-- Botão de menu para mobile -->
            <div class="nav-toggle" id="navToggle">
               <i class="bi bi-list"></i> 
            </div>
            
            <!-- Itens do menu principal -->
            <ul class="nav-menu" id="navMenu">
                  <li><a href="#">Olá usuário087  <span id="navUserName"></span> <img id="navUserPhoto" src="assets/diversos/foto em branco.jpg" alt="Foto" class="nav-profile-photo"></a></li>
                <li><a href="colecao.html" onclick="showLoaderOnNavigate(event, 'colecao.html')">Coleção</a></li>
                <li><a href="sorteio.html" onclick="showLoaderOnNavigate(event, 'sorteio.html')">Abrir Pacote</a></li>
                <li><a href="#" onclick="signOutAndRedirect()">Sair</a></li>
              
            </ul>
        </nav>
    </header>

    <!-- Área principal do conteúdo -->
    <div class="centra-superior">
        <!-- Carrossel de cartas (rolagem automática) -->
        <div class="barra-superior">
            <div class="carrossel">
                <div class="carrossel-track" id="carrossel-track-inicial">
                    <!-- Imagens serão inseridas via JavaScript -->
                </div>
            </div>
        </div>
       
        <!-- Botão principal de ação -->
        <div class="centralizar-btn">
            <a href="sorteio.html" class="btn abrir-pack" role="button"
                onclick="showLoaderOnNavigate(event, 'sorteio.html')">
                Abrir Pacote
            </a>
        </div>
    </div>

    <!-- Scripts -->
    <script src="cards.js"></script> <!-- Contém os arrays de cartas (comum, raro, épico, lendário) -->
    <script src="carregamento.js"></script> <!-- Controla a exibição do loader -->

    <script>
        // Prepara todas as imagens para o carrossel (duplicadas para efeito contínuo)
        const todasImagens = [...lendario, ...epico, ...raro, ...comum];
        const fotosCarrossel = [...todasImagens, ...todasImagens];

        // Insere as imagens no carrossel
        const trackInicial = document.getElementById("carrossel-track-inicial");
        fotosCarrossel.forEach(src => {
            const img = document.createElement("img");
            img.src = src;
            img.alt = "carta";
            trackInicial.appendChild(img);
        });

        // Esconde o loader quando a página carrega
        window.addEventListener('load', hideLoader);
        document.addEventListener('DOMContentLoaded', hideLoader);

        // Controle do menu mobile (toggle)
        const navToggle = document.getElementById('navToggle');
        const navMenu = document.getElementById('navMenu');
        navToggle.addEventListener('click', () => {
            navMenu.classList.toggle('show-menu');
        });
        function signOutAndRedirect() {
    // 1. Chamar a função de logout do Google Identity Services
    // Isso é importante para que o Google não faça login automático na próxima visita
    google.accounts.id.disableAutoSelect();

    // 2. Limpar quaisquer dados de sessão que você armazenou no localStorage
    // Isso remove as informações do usuário do navegador para seu aplicativo.
    localStorage.removeItem('google_id_token');
    localStorage.removeItem('user_name');
    localStorage.removeItem('user_email');
    localStorage.removeItem('user_photo');

    console.log("Usuário deslogado do Google e dados locais removidos.");

    // 3. Redirecionar o usuário para a página de login
    // ESTA É A LINHA PRINCIPAL PARA O REDIRECIONAMENTO
    window.location.href = 'login.html'; // Garante que o navegador vá para 'login.html'
}

    </script>
    
</body>